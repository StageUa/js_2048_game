function t(){let t=e.getState();for(let e=0;e<4;e++)for(let r=0;r<4;r++){let s=document.querySelector(`.field-row:nth-child(${e+1})
      .field-cell:nth-child(${r+1})`);s.textContent=0===t[e][r]?"":t[e][r],s.className="field-cell",0!==t[e][r]&&s.classList.add(`field-cell--${t[e][r]}`)}document.querySelector(".game-score").textContent=e.getScore();let r=e.getStatus(),s=document.querySelector(".message-win"),o=document.querySelector(".message-lose");"win"===r?s.classList.remove("hidden"):"lose"!==r&&function(){for(let t=0;t<4;t++)for(let r=0;r<4;r++)if(0===e.board[t][r])return!0;for(let t=0;t<4;t++)for(let r=0;r<4;r++)if(t>0&&e.board[t][r]===e.board[t-1][r]||t<3&&e.board[t][r]===e.board[t+1][r]||r>0&&e.board[t][r]===e.board[t][r-1]||r<3&&e.board[t][r]===e.board[t][r+1])return!0;return!1}()?o.classList.add("hidden"):o.classList.remove("hidden");let a=document.querySelector(".start");"playing"===r&&a&&(a.textContent="Restart",a.classList.remove("start"),a.classList.add("restart"));let i=document.querySelector(".message-start");"idle"===r?i.classList.remove("hidden"):i.classList.add("hidden")}document.addEventListener("keydown",r=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(r.key)){switch(r.preventDefault(),r.key){case"ArrowUp":e.moveUp();break;case"ArrowDown":e.moveDown();break;case"ArrowLeft":e.moveLeft();break;case"ArrowRight":e.moveRight()}t()}});const e=new class{constructor(t){this.board=t||[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle"}moveLeft(){let t=!1;for(let e=0;e<4;e++)for(let r=1;r<4;r++)if(0!==this.board[e][r]){let s=r;for(;s>0&&0===this.board[e][s-1];)this.board[e][s-1]=this.board[e][s],this.board[e][s]=0,s--,t=!0;s>0&&this.board[e][s-1]===this.board[e][s]&&(this.board[e][s-1]*=2,this.score+=this.board[e][s-1],this.board[e][s]=0,t=!0)}t&&this.generateNewNumber()}moveRight(){let t=!1;for(let e=0;e<4;e++)for(let r=2;r>=0;r--)if(0!==this.board[e][r]){let s=r;for(;s<3&&0===this.board[e][s+1];)this.board[e][s+1]=this.board[e][s],this.board[e][s]=0,s++,t=!0;s<3&&this.board[e][s+1]===this.board[e][s]&&(this.board[e][s+1]*=2,this.score+=this.board[e][s+1],this.board[e][s]=0,t=!0)}t&&this.generateNewNumber()}moveUp(){let t=!1;for(let e=0;e<4;e++)for(let r=1;r<4;r++)if(0!==this.board[r][e]){let s=r;for(;s>0&&0===this.board[s-1][e];)this.board[s-1][e]=this.board[s][e],this.board[s][e]=0,s--,t=!0;s>0&&this.board[s-1][e]===this.board[s][e]&&(this.board[s-1][e]*=2,this.score+=this.board[s-1][e],this.board[s][e]=0,t=!0)}t&&this.generateNewNumber()}moveDown(){let t=!1;for(let e=0;e<4;e++)for(let r=2;r>=0;r--)if(0!==this.board[r][e]){let s=r;for(;s<3&&0===this.board[s+1][e];)this.board[s+1][e]=this.board[s][e],this.board[s][e]=0,s++,t=!0;s<3&&this.board[s+1][e]===this.board[s][e]&&(this.board[s+1][e]*=2,this.score+=this.board[s+1][e],this.board[s][e]=0,t=!0)}t&&this.generateNewNumber()}getScore(){return this.score}getState(){return this.board}getStatus(){return["idle","playing","win","lose"].includes(this.status)?this.status:"idle"}start(){this.status="playing",this.generateNewNumber(),this.generateNewNumber()}restart(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle",this.start()}generateRandomNumber(){return .9>Math.random()?2:4}generateNewNumber(){let t=[];for(let e=0;e<4;e++)for(let r=0;r<4;r++)0===this.board[e][r]&&t.push({row:e,col:r});if(t.length>0){let{row:e,col:r}=t[Math.floor(Math.random()*t.length)];this.board[e][r]=this.generateRandomNumber()}}};t(),document.querySelector(".container").addEventListener("click",r=>{(r.target.classList.contains("start")||r.target.classList.contains("restart"))&&(e.restart(),t())});
//# sourceMappingURL=index.16684f77.js.map
