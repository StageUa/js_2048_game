!function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var e=function(){var e,r;function a(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,a),this.board=t||[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle"}return e=[{key:"moveLeft",value:function(){for(var t=!1,e=0;e<4;e++)for(var r=1;r<4;r++)if(0!==this.board[e][r]){for(var a=r;a>0&&0===this.board[e][a-1];)this.board[e][a-1]=this.board[e][a],this.board[e][a]=0,a--,t=!0;a>0&&this.board[e][a-1]===this.board[e][a]&&(this.board[e][a-1]*=2,this.score+=this.board[e][a-1],this.board[e][a]=0,t=!0)}t&&this.generateNewNumber()}},{key:"moveRight",value:function(){for(var t=!1,e=0;e<4;e++)for(var r=2;r>=0;r--)if(0!==this.board[e][r]){for(var a=r;a<3&&0===this.board[e][a+1];)this.board[e][a+1]=this.board[e][a],this.board[e][a]=0,a++,t=!0;a<3&&this.board[e][a+1]===this.board[e][a]&&(this.board[e][a+1]*=2,this.score+=this.board[e][a+1],this.board[e][a]=0,t=!0)}t&&this.generateNewNumber()}},{key:"moveUp",value:function(){for(var t=!1,e=0;e<4;e++)for(var r=1;r<4;r++)if(0!==this.board[r][e]){for(var a=r;a>0&&0===this.board[a-1][e];)this.board[a-1][e]=this.board[a][e],this.board[a][e]=0,a--,t=!0;a>0&&this.board[a-1][e]===this.board[a][e]&&(this.board[a-1][e]*=2,this.score+=this.board[a-1][e],this.board[a][e]=0,t=!0)}t&&this.generateNewNumber()}},{key:"moveDown",value:function(){for(var t=!1,e=0;e<4;e++)for(var r=2;r>=0;r--)if(0!==this.board[r][e]){for(var a=r;a<3&&0===this.board[a+1][e];)this.board[a+1][e]=this.board[a][e],this.board[a][e]=0,a++,t=!0;a<3&&this.board[a+1][e]===this.board[a][e]&&(this.board[a+1][e]*=2,this.score+=this.board[a+1][e],this.board[a][e]=0,t=!0)}t&&this.generateNewNumber()}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return["idle","playing","win","lose"].includes(this.status)?this.status:"idle"}},{key:"start",value:function(){this.status="playing",this.generateNewNumber(),this.generateNewNumber()}},{key:"restart",value:function(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle",this.start()}},{key:"generateRandomNumber",value:function(){return .9>Math.random()?2:4}},{key:"generateNewNumber",value:function(){for(var t=[],e=0;e<4;e++)for(var r=0;r<4;r++)0===this.board[e][r]&&t.push({row:e,col:r});if(t.length>0){var a=t[Math.floor(Math.random()*t.length)],o=a.row,s=a.col;this.board[o][s]=this.generateRandomNumber()}}}],t(a.prototype,e),r&&t(a,r),a}();function r(){for(var t=a.getState(),e=0;e<4;e++)for(var r=0;r<4;r++){var o=document.querySelector(".field-row:nth-child(".concat(e+1,")\n      .field-cell:nth-child(").concat(r+1,")"));o.textContent=0===t[e][r]?"":t[e][r],o.className="field-cell",0!==t[e][r]&&o.classList.add("field-cell--".concat(t[e][r]))}document.querySelector(".game-score").textContent=a.getScore();var s=a.getStatus(),i=document.querySelector(".message-win"),n=document.querySelector(".message-lose");"win"===s?i.classList.remove("hidden"):"lose"!==s&&function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)if(0===a.board[t][e])return!0;for(var r=0;r<4;r++)for(var o=0;o<4;o++)if(r>0&&a.board[r][o]===a.board[r-1][o]||r<3&&a.board[r][o]===a.board[r+1][o]||o>0&&a.board[r][o]===a.board[r][o-1]||o<3&&a.board[r][o]===a.board[r][o+1])return!0;return!1}()?n.classList.add("hidden"):n.classList.remove("hidden");var d=document.querySelector(".start");"playing"===s&&d&&(d.textContent="Restart",d.classList.remove("start"),d.classList.add("restart"));var h=document.querySelector(".message-start");"idle"===s?h.classList.remove("hidden"):h.classList.add("hidden")}document.addEventListener("keydown",function(t){if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t.key)){switch(t.preventDefault(),t.key){case"ArrowUp":a.moveUp();break;case"ArrowDown":a.moveDown();break;case"ArrowLeft":a.moveLeft();break;case"ArrowRight":a.moveRight()}r()}});var a=new e;r(),document.querySelector(".container").addEventListener("click",function(t){(t.target.classList.contains("start")||t.target.classList.contains("restart"))&&(a.restart(),r())})}();
//# sourceMappingURL=index.cb57be33.js.map
